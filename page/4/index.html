<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","version":"8.5.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="更不更新看心情">
<meta property="og:type" content="website">
<meta property="og:title" content="不先进摸鱼研究所">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="不先进摸鱼研究所">
<meta property="og:description" content="更不更新看心情">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Albert -W">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>不先进摸鱼研究所</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">不先进摸鱼研究所</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">在hexo上的分站</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
        <li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a></li>
        <li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
        <li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Commonweal 404</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Albert -W"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Albert -W</p>
  <div class="site-description" itemprop="description">更不更新看心情</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:jackwjiong@126.com" title="E-Mail → mailto:jackwjiong@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/21/%E4%B8%80%E3%80%81C++%E5%9F%BA%E7%A1%80%EF%BC%883%E4%B8%AA%E6%9C%88%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/21/%E4%B8%80%E3%80%81C++%E5%9F%BA%E7%A1%80%EF%BC%883%E4%B8%AA%E6%9C%88%EF%BC%89/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-21 21:53:27" itemprop="dateCreated datePublished" datetime="2021-07-21T21:53:27+08:00">2021-07-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-01 17:52:27" itemprop="dateModified" datetime="2021-08-01T17:52:27+08:00">2021-08-01</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>一、C++基础（3个月）</p>
<p>4、移动构造函数与拷贝构造函数对比<br>5、深拷贝与浅拷贝的区别</p>
<p>12、内存泄露的情况<br>15、野指针产生与避免<br>16、多态：动态多态、静态多态<br>19、静态多态：重写、重载、模板<br>25、右值引用<br>26、std::move函数<br>27、四种智能指针及底层实现：auto_ptr、unique_ptr、shared_ptr、weak_ptr<br>28、shared_ptr中的循环引用怎么解决？（weak_ptr）<br>30、vector迭代器失效的情况<br>33、STL容器空间配置器</p>
<p>参考书籍：《C++ Primer》（第5版）、《STL源码剖析》、《深度探索C++对象模型》</p>
<p>二、计算机网络（1个月）<br>1、OSI7层网络模型：应用层、表示层、会话层、运输层、网络层、链路层、物理层<br>2、TCP/IP四层网络模型：应用层、运输层、网际层、接口层<br>综合OSI与TCP/IP模型，学习五层网络模型：<br>从上向下架构：应用层、运输层、网络层、链路层、物理层<br>链路层：<br>3、MTU<br>4、MAC地址<br>网络层：<br>5、地址解析协议<br>6、为啥有IP地址还需要MAC地址？同理，为啥有了MAC地址还需要IP地址？<br>7、网络层转发数据报的流程<br>8、子网划分、子网掩码<br>9、网络控制报文协议ICMP<br>10、ICMP应用举例：PING、traceroute<br>运输层：<br>13、-TCP滑动窗口原理-<br>14、TCP超时重传时间选择<br>15、TCP流程控制<br>16、TCP拥塞控制（一定要弄清楚与流量控制的区别）<br>17、TCP三次握手及状态变化。为啥不是两次握手？<br>18、TCP四次挥手及状态变化。为啥不是三次挥手？<br>19、TCP连接释放中TIME_WAIT状态的作用<br>20、SYN泛洪攻击。如何解决？<br>21、TCP粘包<br>22、TCP心跳包<br>23、路由器与交换机的区别<br>24、UDP如何实现可靠传输<br>应用层：<br>25、DNS域名系统。采用TCP还是UDP协议？为什么？<br>28、HTTP1.0、HTTP1.1、HTTP2.0对比<br>29、HTTP与HTTPS对比<br>30、HTTPS加密流程<br>33、cookie与session区别<br>34、输入一个URL到显示页面的流程（越详细越好，搞明白这个，网络这块就差不多了）</p>
<p>参考书籍：《计算机网络》（第5版）、《TCP/IP详解卷1：协议》、《图解HTTP》</p>
<p>三、操作系统（1个月）<br>3、互斥锁与自旋锁的底层区别<br>4、孤儿进程与僵尸进程<br>9、fork进程的底层：读时共享，写时复制<br>12、进程的调度算法<br>13、阻塞IO与非阻塞IO<br>15、静态链接与动态链接的过程</p>
<p>参考书籍：《Unix环境高级编程》、《Linux多线程服务器端编程》<br>ps:操作系统的内容看起来不是很多，实际上每个问题答案的底层原理要弄懂还是很考验基本功的。比如：互斥锁与自旋锁的区别，实际上涉及到阻塞时线程的状态是不一样的。互斥锁阻塞的线程是挂起的，此时系统会优先执行其它可执行的线程，就会将阻塞的线程切换到可执行线程，而当临界区执行的时间非常短时，此时线程切换频繁、开销较大，此时就会采用自旋锁的方式，让阻塞的线程处于忙等状态。</p>
<p>四、网络编程（1个月）<br>1、IO多路复用：select、poll、epoll的区别（非常重要，几乎必问，回答得越底层越好，要会使用）<br>2、手撕一个最简单的server端服务器（socket、bind、listen、accept这四个API一定要非常熟练）<br>3、线程池<br>4、基于事件驱动的reactor模式<br>5、边沿触发与水平触发的区别<br>6、非阻塞IO与阻塞IO区别</p>
<p>参考书籍：《Unix网络编程》<br>ps:网络编程掌握以上几点就够了，要搞明白还是要花很久时间的。</p>
<p>五、数据结构与算法及刷题（2个月）<br>1、数组<br>2、链表<br>3、栈<br>4、队列<br>5、堆<br>6、二叉树：二叉搜索树、平衡树、红黑树<br>7、B树、B+树<br>8、哈希表及哈希冲突<br>9、排序算法：冒泡排序、简单选择排序、插入排序、希尔排序、归并排序、堆排序、快速排序<br>（要求能够面试时手写出堆排序和快速排序）<br>10、二分法：旋转数组找target<br>11、回溯法：全排列、复原IP地址<br>12、动态规划（掌握基本的动态规划的几个题其实就够了，如：斐波那契数列、接雨水、股票的最佳买入时机）</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/14/%E7%BD%91%E7%BB%9C%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/14/%E7%BD%91%E7%BB%9C%E5%B1%82/" class="post-title-link" itemprop="url">计算机网络笔记：网络层</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-14 17:54:28" itemprop="dateCreated datePublished" datetime="2021-07-14T17:54:28+08:00">2021-07-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-08-11 22:00:50" itemprop="dateModified" datetime="2021-08-11T22:00:50+08:00">2021-08-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h1><p>主要任务：把分组从源端传输到目的端，为分组交换网上的不同主机提供通信服务。<br>网络层传输的单位是数据报。</p>
<ol>
<li>路由选择和分组转发</li>
<li>异构网络的互连</li>
<li>拥塞控制<ol>
<li>开环控制</li>
<li>闭环控制<br>如果所有节点都来不及接受分组，而要丢弃大量分组的话，网络就处于拥塞的状态。因此应当采取一定措施，从而环节这种拥塞。</li>
</ol>
</li>
</ol>
<h1 id="数据交换方式"><a href="#数据交换方式" class="headerlink" title="数据交换方式"></a>数据交换方式</h1><p>”路由器“——实现数据交换的单元。</p>
<h2 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h2><ol>
<li>建立连接——呼叫——连接电路</li>
<li>通信</li>
<li>释放连接——拆除电路</li>
</ol>
<p>资源是独占的。</p>
<p>多路复用技术——时分复用和频分复用</p>
<p>优点：</p>
<ol>
<li>通信时延小</li>
<li>有序传输</li>
<li>没有冲突</li>
<li>实时性较强</li>
</ol>
<p>缺点：</p>
<ol>
<li>建立连接时间长</li>
<li>线路使用效率低</li>
<li>灵活性交叉</li>
<li>无差错控制能力</li>
</ol>
<h2 id="报文交换"><a href="#报文交换" class="headerlink" title="报文交换"></a>报文交换</h2><p>报文：源应用发送的信息整体</p>
<p>优点：</p>
<ol>
<li>无需建立连接</li>
<li>存储转发，动态分配线路</li>
<li>线路可靠性比较高</li>
<li>线路利用率比较高</li>
<li>多目标服务特征</li>
</ol>
<p>缺点：</p>
<ol>
<li>有存储转发实验</li>
<li>报文大小补丁，需要网络节点具有交大的缓存空间。</li>
</ol>
<h2 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h2><p>分组：把大的数据块分割成小的数据块</p>
<p>优点：</p>
<ol>
<li>无需建立连接</li>
<li>存储转发，动态分配线路</li>
<li>线路可靠性较高</li>
<li>线路利用率较高</li>
<li>相对于报文交换，具有更佳的存储管理能力。</li>
</ol>
<p>缺点：</p>
<ol>
<li>有存储转发时延</li>
<li>需要传输额外的信息量</li>
<li>乱序传送到目的主机的时候，要对分组排序重组。</li>
</ol>
<h2 id="报文交换和分组交换"><a href="#报文交换和分组交换" class="headerlink" title="报文交换和分组交换"></a>报文交换和分组交换</h2><h2 id="数据报和虚电路方式"><a href="#数据报和虚电路方式" class="headerlink" title="数据报和虚电路方式"></a>数据报和虚电路方式</h2><p>数据报格式——无连接服务<br>虚电路方式——连接服务</p>
<p>无连接：不事先为分组的传输确定传输路径。</p>
<p>连接：为分组的传输确定传输路径，然后衍路径传输系列分组，系列分组传输路径相同，传输结束后拆除连接。</p>
<h3 id="数据报方式"><a href="#数据报方式" class="headerlink" title="数据报方式"></a>数据报方式</h3><ol>
<li>无连接</li>
<li>每个分组携带源和目的地址</li>
<li>路由器根据分组的目的地址转发分组</li>
</ol>
<h3 id="虚电路方式"><a href="#虚电路方式" class="headerlink" title="虚电路方式"></a>虚电路方式</h3><p>概念：一条源主机到目的主机类似于电路的路径，路径上的所有结点都需要维持这条虚电路的建立，每一项记录另一个打开的虚电路的信息。</p>
<p>通信过程：</p>
<ol>
<li>建立虚电路<br>每个分组携带虚电路号，而非自己的地址。源主机发送呼叫请求分组，并收到呼叫应答分组后才算建立了连接。</li>
<li>数据传输——全双工的</li>
<li>释放连接</li>
</ol>
<h3 id="二者的比较"><a href="#二者的比较" class="headerlink" title="二者的比较"></a>二者的比较</h3><div class="table-container">
<table>
<thead>
<tr>
<th>项目</th>
<th>数据报服务</th>
<th>虚电路服务</th>
</tr>
</thead>
<tbody>
<tr>
<td>连接的建立</td>
<td>不需要</td>
<td>需要</td>
</tr>
<tr>
<td>目的地址</td>
<td>每个分组都具有完整的目的地址</td>
<td>仅仅在连接建立的阶段才会使用，之后每个分组会使用长度较短的虚电路号</td>
</tr>
<tr>
<td>路由选择</td>
<td>每个分组独立地进行</td>
<td>属于同一条虚电路的分组按照同一路转发</td>
</tr>
<tr>
<td>分组顺序</td>
<td>不保证有序到达</td>
<td>保证有序到达</td>
</tr>
<tr>
<td>可靠性</td>
<td>不保证可靠性</td>
<td>可靠性由网络保证</td>
</tr>
<tr>
<td>对网络故障的适应性</td>
<td>出故障的节点丢失分组，其他分组路径选择发生变化，可以正常传输</td>
<td>所有经过故障结点的虚电路均无法正常工作</td>
</tr>
<tr>
<td>差错处理和流量控制</td>
<td>由用户主机进行流量控制，不保证数据包的可靠性</td>
<td>可由分组交换网负责，或者用户主机负责</td>
</tr>
</tbody>
</table>
</div>
<h1 id="路由算法和路由协议"><a href="#路由算法和路由协议" class="headerlink" title="路由算法和路由协议"></a>路由算法和路由协议</h1><p>最佳路由：相对合理的路由路径。——相对于某种特定需求下</p>
<p>路由算法包括：</p>
<ol>
<li>静态路由算法——非自适应的——简便可靠，但路由更新较慢</li>
<li>动态路由算法——自适应的——路由器之间彼此交换信息，按照路由算法计算路由表项。——但算法复杂，增加网络负担。</li>
</ol>
<p>动态路由算法包括：</p>
<ol>
<li>链路状态路由算法——OSPF——全局性的</li>
<li>距离向量路由算法——RIP——局部性的</li>
</ol>
<p>分层次选择路由协议。</p>
<ol>
<li>网络规模大</li>
<li>隐秘性。</li>
</ol>
<p>自治系统（AS）：单一技术管理下的一组路由器。这些路由器使用一种AS内部的路由器选择协议和共同的度量来确定分组在这个AS内的路由，同时还会使用一种AS之间的路由协议来确定AS之间的路由。</p>
<p>一个AS内所有网络都属于一个行政单位来管辖，一个AS内的所有路由器都应该是相互连通的。</p>
<h1 id="IP数据"><a href="#IP数据" class="headerlink" title="IP数据"></a>IP数据</h1><h2 id="TCP-IP协议栈"><a href="#TCP-IP协议栈" class="headerlink" title="TCP-IP协议栈"></a>TCP-IP协议栈</h2><div class="table-container">
<table>
<thead>
<tr>
<th>网络层级</th>
<th>协议栈</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用层</td>
<td>HTTP,FTP,DNS</td>
</tr>
<tr>
<td>传输层</td>
<td>TCP,UDP</td>
</tr>
<tr>
<td>网络层</td>
<td>IP,ARP,ICMP,IGMP</td>
</tr>
<tr>
<td>数据链路层</td>
<td>—-</td>
</tr>
<tr>
<td>物理层</td>
<td>—-</td>
</tr>
</tbody>
</table>
</div>
<h2 id="IP数据报的格式"><a href="#IP数据报的格式" class="headerlink" title="IP数据报的格式"></a>IP数据报的格式</h2><p>IP数据报可以分为两个部分：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>首部</th>
<th>数据部分（TCP,UDP段）</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>首部格式如下:<br><img src="https://img-blog.csdn.net/20170516161649348" alt="image"></p>
<p>一些概念：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>项目</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>版本</td>
<td>ipv4~piv6</td>
</tr>
<tr>
<td>首部长度</td>
<td>单位是4B</td>
</tr>
<tr>
<td>区分服务</td>
<td>指示期望获得那种类型的服务</td>
</tr>
<tr>
<td>总长度</td>
<td>首部+数据</td>
</tr>
<tr>
<td>生存时间</td>
<td>TTL:IP分组的保质期</td>
</tr>
<tr>
<td>协议</td>
<td>数据部分的协议</td>
</tr>
<tr>
<td>首部检验和</td>
<td>只检验首部</td>
</tr>
<tr>
<td>源和目的地的IP</td>
<td>32位</td>
</tr>
<tr>
<td>可选字段</td>
<td>用来支持排错、测量和安全等措施。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="IP数据报分片"><a href="#IP数据报分片" class="headerlink" title="IP数据报分片"></a>IP数据报分片</h2><h3 id="最大传输单元——MTU"><a href="#最大传输单元——MTU" class="headerlink" title="最大传输单元——MTU"></a>最大传输单元——MTU</h3><p>链路层数据帧可封装数据上限。在以太网中是1500字节</p>
<h3 id="标识"><a href="#标识" class="headerlink" title="标识"></a>标识</h3><p>同一数据包的分片使用同一标识。<br>中间位：DF = 1,禁止分片；DF = 0,允许分片。<br>最低位：MF = 1，后面还有分片；MF = 0，最后一片/没有分片。<br>片偏移：较长分组分片后，某片在原分组中的相对位置。以8B为单位。</p>
<h1 id="IPv4和IPv6"><a href="#IPv4和IPv6" class="headerlink" title="IPv4和IPv6"></a>IPv4和IPv6</h1><h2 id="分类的IP地址"><a href="#分类的IP地址" class="headerlink" title="分类的IP地址"></a>分类的IP地址</h2><p>32位标识符，标识路由器主机的接口。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip = 网络号,主机号</span><br></pre></td></tr></table></figure>
<p>点分十进制</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>分类</th>
<th>IP地址</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>1~126</td>
</tr>
<tr>
<td>B</td>
<td>128~191</td>
</tr>
<tr>
<td>C</td>
<td>192~223</td>
</tr>
<tr>
<td>D</td>
<td>224~239</td>
</tr>
<tr>
<td>E</td>
<td>240~255</td>
</tr>
</tbody>
</table>
</div>
<p>特殊IP地址：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>网络号</th>
<th>主机号</th>
<th>可作为IP分组源地址</th>
<th>可作为IP分组目的地址</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>全0</td>
<td>全0</td>
<td>Y</td>
<td>N</td>
<td>本网范围内表示整个主机，路由表中由于表示默认路由</td>
</tr>
<tr>
<td>全0</td>
<td>特定值</td>
<td>N</td>
<td>Y</td>
<td>表示本网内某个特定的主机</td>
</tr>
<tr>
<td>全1</td>
<td>全1</td>
<td>N</td>
<td>Y</td>
<td>本网广播地址</td>
</tr>
<tr>
<td>特定值</td>
<td>全0</td>
<td>N</td>
<td>N</td>
<td>网络地址，表示一个网络</td>
</tr>
<tr>
<td>特定值</td>
<td>全1</td>
<td>N</td>
<td>Y</td>
<td>直接广播地址</td>
</tr>
<tr>
<td>127</td>
<td>任意数</td>
<td>Y</td>
<td>Y</td>
<td>用于本地软件环回测试，称为环回地址</td>
</tr>
</tbody>
</table>
</div>
<h2 id="私有IP地址"><a href="#私有IP地址" class="headerlink" title="私有IP地址"></a>私有IP地址</h2><div class="table-container">
<table>
<thead>
<tr>
<th>地址类别</th>
<th>地址范围</th>
<th>网段个数</th>
<th>网络中的最大主机数</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>10.0.0.0~255.255.255</td>
<td>1</td>
<td>2^24 -2</td>
</tr>
<tr>
<td>B</td>
<td>172.16.0.0~172.31.255.255</td>
<td>16</td>
<td>2^16-2</td>
</tr>
<tr>
<td>C</td>
<td>192.168.0.0~192.168.255.255</td>
<td>256</td>
<td>2^8-2</td>
</tr>
</tbody>
</table>
</div>
<p>总地址数量 - 2是最大主机数。<br>包括自身地址和环回地址</p>
<h2 id="NAT——网络地址转换"><a href="#NAT——网络地址转换" class="headerlink" title="NAT——网络地址转换"></a>NAT——网络地址转换</h2><p>在专用网连接到因特网的路由器上安装NAT软件，安装了NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址。</p>
<p>NAT转换表：</p>
<p>WAN段——LAN端<br>端口号</p>
<p>建立了WAN到LAN之间的对应关系。</p>
<h2 id="子网划分"><a href="#子网划分" class="headerlink" title="子网划分"></a>子网划分</h2><p>某单位划分子网之后，对外仍然表现为一个网络。本单位外的网络是看不见本单位内子网的划分的。</p>
<h3 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h3><p>用来计算子网网络地址。例如：</p>
<p>二级IP地址：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IP： 145.13.3.10</span><br><span class="line">mask: 255.255.0.0</span><br></pre></td></tr></table></figure><br>三级IP地址：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">145.13.3.10</span><br><span class="line">255.255.255.0</span><br></pre></td></tr></table></figure><br>主机部分的子网掩码是0，其他部分（子网号、etc都是1）<br>将子网掩码与IP地址按位与运算，就能得到子网网络地址。</p>
<p>例如：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IP 141.14.72.24</span><br><span class="line">MASK 255.255.192.0</span><br></pre></td></tr></table></figure><br>子网地址是：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">141.14.64.0</span><br></pre></td></tr></table></figure></p>
<h3 id="使用子网时的分组转发"><a href="#使用子网时的分组转发" class="headerlink" title="使用子网时的分组转发"></a>使用子网时的分组转发</h3><p>路由表中包含：</p>
<ol>
<li>目的网络地址</li>
<li>目的网络子网掩码</li>
<li>下一跳地址</li>
</ol>
<p>路由器转发分组的算法:</p>
<ol>
<li>提取目的IP地址</li>
<li>是否直接交付</li>
<li>特定主机路由</li>
<li>检测路由表中有无路径</li>
<li>默认路由： 0.0.0.0</li>
<li>到达TTL： 丢弃，并报告转发分组出错</li>
</ol>
<h3 id="CIDR-无分类编址"><a href="#CIDR-无分类编址" class="headerlink" title="CIDR-无分类编址"></a>CIDR-无分类编址</h3><ol>
<li>无分类域间路由</li>
<li>消除了传统的A~C类和划分子网的概念。</li>
</ol>
<p>网络前缀——主机号<br>网络前缀都相同的连续IP地址组成一个CIDR地址块<br>eg:126.14.32.0/32</p>
<h3 id="构成超网"><a href="#构成超网" class="headerlink" title="构成超网"></a>构成超网</h3><p>将子网聚合成一个更大的子网。方法：<strong>将网络前缀缩短</strong></p>
<h3 id="最长前缀p匹配"><a href="#最长前缀p匹配" class="headerlink" title="最长前缀p匹配"></a>最长前缀p匹配</h3><p>应当选择具有最长的网络前缀的路由。前缀越长，地址块越小，路由就越具体。</p>
<h2 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h2><p>实现MAC地址和IP地址的映射<br>MAC地址：</p>
<h2 id="DHCP协议"><a href="#DHCP协议" class="headerlink" title="DHCP协议"></a>DHCP协议</h2><p>基于UDP方式，广播IP地址、子网掩码、默认网关、DNS服务器名称等信息。</p>
<h2 id="ICMP协议"><a href="#ICMP协议" class="headerlink" title="ICMP协议"></a>ICMP协议</h2><h2 id="ipV6"><a href="#ipV6" class="headerlink" title="ipV6"></a>ipV6</h2><p>双栈协议，隧道奇数</p>
<h2 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h2><h3 id="RIP协议和距离向量算法"><a href="#RIP协议和距离向量算法" class="headerlink" title="RIP协议和距离向量算法"></a>RIP协议和距离向量算法</h3><h3 id="OSPF协议和链路状态算法"><a href="#OSPF协议和链路状态算法" class="headerlink" title="OSPF协议和链路状态算法"></a>OSPF协议和链路状态算法</h3><h3 id="BGP协议"><a href="#BGP协议" class="headerlink" title="BGP协议"></a>BGP协议</h3><h2 id="ip多播"><a href="#ip多播" class="headerlink" title="ip多播"></a>ip多播</h2><h2 id="移动ip"><a href="#移动ip" class="headerlink" title="移动ip"></a>移动ip</h2><h1 id="网络设备"><a href="#网络设备" class="headerlink" title="网络设备"></a>网络设备</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/11/%E4%BC%A0%E8%BE%93%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/11/%E4%BC%A0%E8%BE%93%E5%B1%82/" class="post-title-link" itemprop="url">传输层</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-11 21:22:46" itemprop="dateCreated datePublished" datetime="2021-07-11T21:22:46+08:00">2021-07-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/10/%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%92%8C%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/10/%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%92%8C%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" class="post-title-link" itemprop="url">动态内存和智能指针</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-10 22:05:54" itemprop="dateCreated datePublished" datetime="2021-07-10T22:05:54+08:00">2021-07-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-14 18:00:56" itemprop="dateModified" datetime="2021-07-14T18:00:56+08:00">2021-07-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/10/%E8%99%9A%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/10/%E8%99%9A%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">虚函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-07-10 21:57:47 / Modified: 23:30:18" itemprop="dateCreated datePublished" datetime="2021-07-10T21:57:47+08:00">2021-07-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>OOP在C++中的三大特征便是封装、继承和重载。一般我们先定义一个基类，然后让一个子类继承自基类。例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">father</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string name;</span><br><span class="line"><span class="keyword">float</span> height;</span><br><span class="line">    string son;</span><br><span class="line">    <span class="built_in">father</span>()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">father</span>()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">son</span> :</span> <span class="keyword">public</span> father&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> weight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>派生类继承自基类，自然也继承了基类的函数。如果我们希望不同的派生类具有不同版本的函数，那么基类便声明为虚函数。例如：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">part__</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">part__</span>()&#123;&#125;</span><br><span class="line">    ~<span class="built_in">part__</span>()&#123;&#125;</span><br><span class="line">    vector&lt;<span class="keyword">float</span>&gt; Y,Yprime;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">EST</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> vector&lt;<span class="keyword">int</span>&gt; <span class="title">FCN</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt; Y,vector&lt;<span class="keyword">int</span>&gt; Yprime,<span class="keyword">float</span> time)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTX__</span> <span class="keyword">final</span>:</span> <span class="keyword">public</span> part__&#123;</span><br><span class="line">    <span class="built_in">HTX__</span>()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> vector&lt;<span class="keyword">int</span>&gt; <span class="title">EST</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HTX__::<span class="built_in">EST</span>()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>在这里<code>override</code>表示<code>EST()</code>函数在<code>HTX__</code>类中发生了重写现象。如果后面这个函数并没被重写，编译器就会报错。<br><code>final</code>表示这个类不能再作为基类继续被继承。</p>
<h1 id="虚函数的调用原理"><a href="#虚函数的调用原理" class="headerlink" title="虚函数的调用原理"></a>虚函数的调用原理</h1><p>虚（virtual）函数的一般实现模型是：每一个类（class）有一个虚表（virtual table），内含该class之中有作用的虚（virtual）函数的地址，然后每个对象有一个vptr，指向虚表（virtual table）的所在。<br>每一个类都有一个虚表，而每个类的对象都有一个指向虚表的指针vptr。例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Point</span>();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Point&amp; <span class="title">mult</span><span class="params">( <span class="keyword">float</span> )</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">float</span> <span class="title">x</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> _x; &#125; <span class="comment">//非虚函数，不作存储，这个函数会转化为一个全局函数，而对象作为第一个参数，隐式的传给这个函数</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">y</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">z</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// …</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="built_in">Point</span>( <span class="keyword">float</span> x = <span class="number">0.0</span> );</span><br><span class="line">    <span class="keyword">float</span> _x;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在<code>point</code>类中便会产生包含两个虚函数y和z的虚表。</p>
<p><img src="https://img-blog.csdn.net/20160727201830048" alt="image"></p>
<ol>
<li>上来要取得类的虚表的指针，就是要得到，虚表的地址。存放类对象的内存区的前四个字节其实就是用来存放虚表的地址的。</li>
<li>得到虚表的地址后，从虚表那知道你调用的那个函数的入口地址。根据虚表提供的你要找的函数的地址。并调用函数；你要知道，那个虚表是一个存放指针变量的数组，并不是说，那个虚表中就是存放的虚函数的实体。</li>
</ol>
<h1 id="final和override"><a href="#final和override" class="headerlink" title="final和override"></a>final和override</h1><h1 id="虚函数和默认实参"><a href="#虚函数和默认实参" class="headerlink" title="虚函数和默认实参"></a>虚函数和默认实参</h1><h1 id="抽象函数"><a href="#抽象函数" class="headerlink" title="抽象函数"></a>抽象函数</h1><h1 id="练习代码"><a href="#练习代码" class="headerlink" title="练习代码"></a>练习代码</h1><h2 id="1-简单的虚函数应用范例"><a href="#1-简单的虚函数应用范例" class="headerlink" title="1. 简单的虚函数应用范例"></a>1. 简单的虚函数应用范例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">quote</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">quote</span>(string&amp; book, <span class="keyword">double</span> sales_price) :<span class="built_in">bookNo</span>(book), <span class="built_in">price</span>(sales_price) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">string <span class="title">isbn</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookNo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">double</span> <span class="title">net_price</span><span class="params">(<span class="keyword">size_t</span> n)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n * price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print_total</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;book ISBN=&quot;</span> &lt;&lt; bookNo &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;price=&quot;</span> &lt;&lt; price &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string bookNo;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">double</span> price = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bulk_quote</span> :</span> <span class="keyword">public</span> quote &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Bulk_quote</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Bulk_quote</span>(<span class="keyword">const</span> string&amp;, <span class="keyword">double</span>, <span class="keyword">size_t</span>, <span class="keyword">double</span>);</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">net_price</span><span class="params">(<span class="keyword">size_t</span>)</span> <span class="keyword">const</span> <span class="keyword">override</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">size_t</span> min_qty = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> discount = <span class="number">0.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Bulk_quote::<span class="built_in">Bulk_quote</span>(<span class="keyword">const</span> string&amp; name, <span class="keyword">double</span> price, <span class="keyword">size_t</span> num, <span class="keyword">double</span> discount) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">this</span>-&gt;price = price;</span><br><span class="line">    <span class="keyword">this</span>-&gt;min_qty = num;</span><br><span class="line">    <span class="keyword">this</span>-&gt;discount = discount;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Bulk_quote::net_price</span><span class="params">(<span class="keyword">size_t</span> num)</span> <span class="keyword">const</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num * discount * price;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Bulk_quote bulk = <span class="built_in">Bulk_quote</span>(<span class="string">&quot;123123&quot;</span>, <span class="number">12</span>, <span class="number">12</span> ,<span class="number">0.8</span>);</span><br><span class="line">    bulk.<span class="built_in">print_total</span>();</span><br><span class="line">    cout &lt;&lt; bulk.<span class="built_in">net_price</span>(<span class="number">12</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-虚表的存在"><a href="#2-虚表的存在" class="headerlink" title="2. 虚表的存在"></a>2. 虚表的存在</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>   </span></span><br><span class="line"><span class="class">&#123;</span>  </span><br><span class="line"><span class="keyword">public</span>:  </span><br><span class="line"><span class="keyword">int</span> m_base;  </span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Base::f&quot;</span> &lt;&lt; endl; &#125;  </span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">g</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Base::g&quot;</span> &lt;&lt; endl; &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derive</span> :</span> <span class="keyword">public</span> Base  </span><br><span class="line">&#123;  </span><br><span class="line"><span class="keyword">int</span> m_derived;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*Fun)</span><span class="params">(<span class="keyword">void</span>)</span></span>;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">  Base *d = <span class="keyword">new</span> Derive;  </span><br><span class="line">  Fun pFun = (Fun)*((<span class="keyword">int</span>*)*(<span class="keyword">int</span>*)(d)+<span class="number">0</span>);  </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;&amp;(Base::f): 0x%x /n&quot;</span>, &amp;(Base::f));  </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;&amp;(Base::g):0x%x /n&quot;</span>, &amp;(Base::g));  </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;pFun: 0x%x /n&quot;</span>, pFun);  </span><br><span class="line">  <span class="built_in">pFun</span>();  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdn.net/20160727201924455" alt="image"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/10/%E9%93%BE%E8%B7%AF%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/10/%E9%93%BE%E8%B7%AF%E5%B1%82/" class="post-title-link" itemprop="url">链路层</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-10 11:28:44" itemprop="dateCreated datePublished" datetime="2021-07-10T11:28:44+08:00">2021-07-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/10/%E8%BF%90%E8%BE%93%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/10/%E8%BF%90%E8%BE%93%E5%B1%82/" class="post-title-link" itemprop="url">计算机网络笔记：传输层</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-10 11:28:14" itemprop="dateCreated datePublished" datetime="2021-07-10T11:28:14+08:00">2021-07-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-30 19:33:26" itemprop="dateModified" datetime="2021-07-30T19:33:26+08:00">2021-07-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>只有主机才会出现传输层。其目的是提供<strong>进程和进程</strong>之间的<strong>逻辑通信</strong>服务。<br>复用和分用功能是指，不同信道之间可以采用同一个管道进行信息的传输。</p>
<h2 id="常见的传输层协议：TCP和UDP"><a href="#常见的传输层协议：TCP和UDP" class="headerlink" title="常见的传输层协议：TCP和UDP"></a>常见的传输层协议：TCP和UDP</h2><div class="table-container">
<table>
<thead>
<tr>
<th>传输协议</th>
<th>连接性</th>
<th>描述</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>TCP</td>
<td>面向连接</td>
<td>传输数据之前需要建立连接，传输结束之后需要释放连接</td>
<td>可靠，时延大，适用于大文件</td>
</tr>
<tr>
<td>UDP</td>
<td>无连接</td>
<td>传输数据前不需要建立连接，收到报文后也不需要给出确认</td>
<td>不可靠，时延小，适用于小文件</td>
</tr>
</tbody>
</table>
</div>
<h2 id="传输层的寻址和端口"><a href="#传输层的寻址和端口" class="headerlink" title="传输层的寻址和端口"></a>传输层的寻址和端口</h2><p><strong>复用</strong> 应用层的所有应用进程都可以透过传输层传输到网络层<br><strong>分用</strong> 传输层从网络层收到数据后交付指明的应用进程</p>
<p>端口号只具有本地意义，不同计算机的相同端口没有任何的联系。<br>其长度为16bit，分为<strong>服务端端口号</strong>和<strong>数据端端口号</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>端口号分类</th>
<th>范围</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>熟知端口号</td>
<td><code>0~1023</code></td>
<td>分配给TCP/IP协议的最重要的应用程序</td>
</tr>
<tr>
<td>登记端口号</td>
<td><code>1024~49151</code></td>
<td>为没有数值端口号的应用程序使用的端口号</td>
</tr>
<tr>
<td>客户端端口号</td>
<td><code>49152~65535</code></td>
<td>仅仅在客户进程运行的时候才会动态选择。</td>
</tr>
</tbody>
</table>
</div>
<p>常见的应用协议的端口号：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>应用程序</th>
<th>熟知端口号</th>
</tr>
</thead>
<tbody>
<tr>
<td>FTP</td>
<td>21</td>
</tr>
<tr>
<td>TELNET</td>
<td>23</td>
</tr>
<tr>
<td>SMTP</td>
<td>25</td>
</tr>
<tr>
<td>DNS</td>
<td>53</td>
</tr>
<tr>
<td>TFTP</td>
<td>69</td>
</tr>
<tr>
<td>HTTP</td>
<td>80</td>
</tr>
<tr>
<td>SNMP</td>
<td>161</td>
</tr>
</tbody>
</table>
</div>
<p>在网络中采用套接字组合来识别这个端点。套接字唯一表示了网络中的一个主机和它上面的一个进程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Socket = (IP,port);</span><br></pre></td></tr></table></figure>
<h1 id="多路复用和多路分解技术"><a href="#多路复用和多路分解技术" class="headerlink" title="多路复用和多路分解技术"></a>多路复用和多路分解技术</h1><h1 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h1><h2 id="主要特征"><a href="#主要特征" class="headerlink" title="主要特征"></a>主要特征</h2><ol>
<li>无连接</li>
<li>最大努力交付——不保证可靠交付</li>
<li>面向报文的，它不会对报文的长度进行任何合并或拆分。——因此并不适合大体积的数据的传输</li>
<li>没有拥塞控制，适合实时应用</li>
<li>首部开销小——8字节</li>
</ol>
<h2 id="首部格式"><a href="#首部格式" class="headerlink" title="首部格式"></a>首部格式</h2><div class="table-container">
<table>
<thead>
<tr>
<th>0—15</th>
<th>16—31</th>
</tr>
</thead>
<tbody>
<tr>
<td>源端口号</td>
<td>目的端口号</td>
</tr>
<tr>
<td>UDP长度</td>
<td>UDP检验和</td>
</tr>
</tbody>
</table>
</div>
<p>数据</p>
<p><img src="https://img-blog.csdnimg.cn/2019081218280314.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTE2MDk2OQ==,size_16,color_FFFFFF,t_70" alt="image"></p>
<p>检测整个UDP报文是否有错，如果有错便会丢弃。<br>分用时，如果找不到对应目的端口号，便会丢弃报文，并给发送发发送ICMP的差错报告报文。</p>
<h2 id="UDP的校验过程"><a href="#UDP的校验过程" class="headerlink" title="UDP的校验过程"></a>UDP的校验过程</h2><p>计算校验和的时候，会在UDP头部加上过一个12字节的伪首部。</p>
<p><strong>发送端：</strong></p>
<ol>
<li>填上伪首部</li>
<li>全0填充检验和字段</li>
<li>全0填充数据部分</li>
<li>伪首部+首部+数据部分采用二进制反码求和</li>
<li>计算得到的检验和填入检验和字段</li>
<li>去掉伪首部并发送</li>
</ol>
<p><strong>接收端：</strong></p>
<ol>
<li>填上伪首部</li>
<li>伪首部+首部+数据部分采用二进制反码求和</li>
<li>结果全1则表示无差错。否则丢弃数据或交付给应用层并附上出错的警告。</li>
</ol>
<h1 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h1><h2 id="TCP协议特征"><a href="#TCP协议特征" class="headerlink" title="TCP协议特征"></a>TCP协议特征</h2><ol>
<li>面向连接（虚连接）的传输层协议</li>
<li>点对点的传输</li>
<li>可靠交付的服务，无差错、不丢失、不重复、按序到达。</li>
<li>全双工通讯 1. 发送缓存；2。接受缓存。</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>发送缓存</th>
<th>准备发送的数据和已经发送但没有收到确认的数据</th>
</tr>
</thead>
<tbody>
<tr>
<td>接受缓存</td>
<td>按序到达但尚未被接受应用程序读取的数据和没有按序到达的数据</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li>面向字节流：TCP把应用程序浇下来的数据看成仅仅是一连串字节流的集合</li>
</ol>
<h2 id="TCP报文段"><a href="#TCP报文段" class="headerlink" title="TCP报文段"></a>TCP报文段</h2><p>首部格式</p>
<p><img src="https://img-blog.csdnimg.cn/20190811224019950.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTE2MDk2OQ==,size_16,color_FFFFFF,t_70" alt="image"></p>
<p>概述：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>段名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>源端口</td>
<td>发送方的端口号</td>
</tr>
<tr>
<td>目的端口</td>
<td>接收方的端口号</td>
</tr>
<tr>
<td>序号<code>seq</code></td>
<td>本报文段所发送的数据的第一个字节的序号</td>
</tr>
<tr>
<td>确认号<code>ack</code></td>
<td>期望收到对方下一个报文段的第一个数据字节的序号</td>
</tr>
<tr>
<td>数据偏移</td>
<td>TCP报文段的数据起始处距离TCP报文段的起始处的距离</td>
</tr>
<tr>
<td><strong>控制位</strong></td>
<td></td>
</tr>
<tr>
<td><strong>URG</strong></td>
<td>= 1 时，数据具有优先级，不用在缓存里排队</td>
</tr>
<tr>
<td><strong>ACK</strong></td>
<td>= 1 时，确认号有效，连接建立后所有的报文段ACK=1</td>
</tr>
<tr>
<td><strong>PSH</strong></td>
<td>= 1 时，尽快交付接受应用进程，不用等缓存填满时再向上交付</td>
</tr>
<tr>
<td><strong>RST</strong></td>
<td>= 1 时，说明连接出现了严重差错，必须释放连接。</td>
</tr>
<tr>
<td><strong>SYN</strong></td>
<td>= 1 时，说明是一个连接请求/连接接受报文</td>
</tr>
<tr>
<td><strong>FIN</strong></td>
<td>= 1 时，说明报文段发送方数据完毕，要求释放连接</td>
</tr>
<tr>
<td>窗口</td>
<td>发送本报文段的一方的接受窗口，允许对方发送的数据量</td>
</tr>
<tr>
<td>检验和</td>
<td>检验首部+数据，检验师加上12b的伪头部</td>
</tr>
<tr>
<td>紧急指针</td>
<td>URG =1 的时候投入使用，指出报文段的紧急字节数</td>
</tr>
<tr>
<td>选项</td>
<td>最大报文长度，窗口扩大，时间戳，选择确认等</td>
</tr>
<tr>
<td>填充</td>
<td>填充0到4字节的整数倍</td>
</tr>
</tbody>
</table>
</div>
<h2 id="连接管理"><a href="#连接管理" class="headerlink" title="连接管理"></a>连接管理</h2><p><img src="https://img-blog.csdn.net/20180402204823254?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyOTk4MTUz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="image"></p>
<h3 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h3><ol>
<li>客户端发送连接请求报文段，无应用层数据：<code>SYN = 1，seq = x</code></li>
<li>服务端魏TCP分配缓存和变量，并向客户端返回确认报文段，<strong>不携带数据</strong>，并允许链接:<code>SYN = 1,ACK=1,seq = y,ack = x+1</code></li>
<li>客户端为TCP连接分配缓存和变量，并向服务器端返回确认的确认，<strong>可以携带数据</strong>：<br><code>SYN = 0,ACK = 1,sqe = x+1, ack = y+1</code></li>
</ol>
<h4 id="SYN的洪泛攻击"><a href="#SYN的洪泛攻击" class="headerlink" title="SYN的洪泛攻击"></a>SYN的洪泛攻击</h4><ol>
<li>攻击者发送<code>TCP SYN</code>,待服务器返回<code>ACK</code>时，攻击者不再确认。</li>
<li>此时TCP连接处于挂起状态，服务器会再次发送<code>ACK</code>.</li>
<li>攻击者发对服务器发送大量TCP连接，导致服务器因为挂起的TCP连接而宕机。</li>
</ol>
<p>解决方法：SYN cookie</p>
<h3 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h3><p><img src="https://img-blog.csdn.net/2018040221220414?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyOTk4MTUz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="image"></p>
<ol>
<li>客户端发送连接释放报文段，停止发送数据，主动关闭TCP连接。<code>FIN = 1,seq = u</code></li>
<li>服务端回复确认报文段，连接处于半关闭状态。<code>ACK = 1,seq = v, ack  = u + 1</code></li>
<li>服务端发送完数据，发出连接释放报文段，主动关闭TCP连接。<code>FIN = 1, ACK = 1,seq = w, ack = u + 1</code></li>
<li>客户端回复确认报文段，<strong>等待2MSL</strong>，连接彻底关闭。<code>ACK = 1,seq = u + 1, ack = w + 1</code></li>
</ol>
<p>等待的原因是，如果第三步的确认报文段没有发送给服务器，那么服务器会重新发送报文给客户端。这个过程的时间间隔低于2MSL.</p>
<h3 id="TCP有限状态机"><a href="#TCP有限状态机" class="headerlink" title="TCP有限状态机"></a>TCP有限状态机</h3><p><img src="https://img-blog.csdn.net/20180402215302353?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyOTk4MTUz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="image"></p>
<h3 id="常见的问题"><a href="#常见的问题" class="headerlink" title="常见的问题"></a>常见的问题</h3><h4 id="1-为什么是三次握手？"><a href="#1-为什么是三次握手？" class="headerlink" title="1. 为什么是三次握手？"></a>1. 为什么是三次握手？</h4><p>我们来分析一种特殊情况，假设客户端请求建立连接，发给服务器SYN包等待服务器确认，服务器收到确认后，如果是两次握手，假设服务器给客户端在第二次握手时发送数据，数据从服务器发出，服务器认为连接已经建立，但在发送数据的过程中数据丢失，客户端认为连接没有建立，会进行重传。假设每次发送的数据一直在丢失，客户端一直SYN，服务器就会产生多个无效连接，占用资源，这个时候服务器可能会挂掉。这个现象就是我们听过的“SYN的洪水攻击”。</p>
<p>总结：第三次握手是为了防止：如果客户端迟迟没有收到服务器返回确认报文，这时会放弃连接，重新启动一条连接请求，但问题是：服务器不知道客户端没有收到，所以他会收到两个连接，浪费连接开销。如果每次都是这样，就会浪费多个连接开销</p>
<h4 id="2-在三次握手的过程中，最后一个ack号丢失了怎么办？"><a href="#2-在三次握手的过程中，最后一个ack号丢失了怎么办？" class="headerlink" title="2.在三次握手的过程中，最后一个ack号丢失了怎么办？"></a>2.在三次握手的过程中，最后一个ack号丢失了怎么办？</h4><p>如果此时ACK在网络中丢失，那么Server端该TCP连接的状态为SYN_RECV，并且依次等待3秒、6秒、12秒后重新发送SYN+ACK包，以便Client重新发送ACK包。 Server重发SYN+ACK包的次数，可以通过设置/proc/sys/net/ipv4/tcp_synack_retries修改，默认值为5。如果重发指定次数后，仍然未收到ACK应答，那么一段时间后，Server自动关闭这个连接。但是Client认为这个连接已经建立，如果Client端向Server写数据，Server端将以RST包(用于强制关闭tcp连接)响应，方能感知到Server的错误。</p>
<h4 id="3-为什么需要2MSL时间？"><a href="#3-为什么需要2MSL时间？" class="headerlink" title="3. 为什么需要2MSL时间？"></a>3. 为什么需要2MSL时间？</h4><p>首先，MSL即Maximum Segment Lifetime，就是最大报文生存时间，是任何报文在网络上的存在的最长时间，超过这个时间报文将被丢弃。《TCP/IP详解》中是这样描述的：MSL是任何报文段被丢弃前在网络内的最长时间。RFC 793中规定MSL为2分钟，实际应用中常用的是30秒、1分钟、2分钟等。</p>
<p>TCP的TIME_WAIT需要等待2MSL，当TCP的一端发起主动关闭，三次挥手完成后发送第四次挥手的ACK包后就进入这个状态，等待2MSL时间主要目的是：防止最后一个ACK包对方没有收到，那么对方在超时后将重发第三次握手的FIN包，主动关闭端接到重发的FIN包后可以再发一个ACK应答包。在TIME_WAIT状态时两端的端口不能使用，要等到2MSL时间结束才可以继续使用。当连接处于2MSL等待阶段时任何迟到的报文段都将被丢弃。</p>
<h4 id="4-为什么是四次挥手？"><a href="#4-为什么是四次挥手？" class="headerlink" title="4. 为什么是四次挥手？"></a>4. 为什么是四次挥手？</h4><p>双方关闭连接要经过双方都同意。所以，首先是客服端给服务器发送FIN，要求关闭连接，服务器收到后会发送一个ACK进行确认。服务器然后再发送一个FIN，客户端发送ACK确认，并进入TIME_WAIT状态。等待2MSL后自动关闭。</p>
<h2 id="传输可靠性"><a href="#传输可靠性" class="headerlink" title="传输可靠性"></a>传输可靠性</h2><p>网络层(IP)只能提供尽最大努力的交付，是不可靠的，因此必须要靠TCP实现可靠传输。</p>
<p>可靠：保证接收方进程从缓存区读出的字节流和发送方发出的字节流完全一样。</p>
<h3 id="校验"><a href="#校验" class="headerlink" title="校验"></a>校验</h3><ol>
<li>增加伪首部，校验求和</li>
</ol>
<h3 id="序号"><a href="#序号" class="headerlink" title="序号"></a>序号</h3><p>采用字节序号功能。每一个字节都有一个序号。 </p>
<h3 id="确认"><a href="#确认" class="headerlink" title="确认"></a>确认</h3><p>采用累计确认技术。</p>
<h3 id="重传"><a href="#重传" class="headerlink" title="重传"></a>重传</h3><p>如果确认号和报文段的序号不符，则会要求发送方重传。</p>
<p>确认重传不分家。</p>
<ol>
<li>TCP发送包在规定时间内没有收到确认就需要重传已经发送的报文段。</li>
<li>采用自适应算法，动态改变RTTs</li>
<li>冗余ACK——快速重传技术。当发送方收到了3个对于报文1的冗余ACK，就会认为报文2丢失，重传2号报文段</li>
</ol>
<h2 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>限制发送方的发送速度，使得接收方来得及接受</p>
<h3 id="主要手段：滑动窗口"><a href="#主要手段：滑动窗口" class="headerlink" title="主要手段：滑动窗口"></a>主要手段：滑动窗口</h3><p>在通信过程中，接收方会根据自己接受缓存的大小，动态地调整发送方的发送窗口大小，即接受窗口rwnd，发送方的发送窗口取接受窗口rwnd和拥塞窗口cwnd的最小值。</p>
<p>发送方和接受房的窗口大小应该是一样的。二者通过确认报文段商定窗口。</p>
<p>窗口大小是可以动态变化的。</p>
<p><img src="https://img-blog.csdn.net/20160906072310877" alt="image"><br><img src="https://img-blog.csdn.net/20160906084353705" alt="image"></p>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p><img src="https://img-blog.csdn.net/20140509220855687?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveWVjaGFvZGVjaHVudGlhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="image"></p>
<p>降低传输速度的方法：减小滑动窗口。</p>
<p>TCP为每个链接设定一个持续计时器。只要TCP链接的一方收到对方的零窗口通知，那么就会启动持续计时器。<br>如果持续计时器设置的时间稻妻，就会发送一个零窗口探测报文段，接收方收到探测报文段时会给出现在的窗口值。</p>
<h2 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h2><h3 id="拥塞"><a href="#拥塞" class="headerlink" title="拥塞"></a>拥塞</h3><p>对资源需求的综合&gt;可用资源时，会导致拥塞。<br>网络中资源同时呈现供应不足——网络性能变坏——网络吞吐量随输入符合增大而下降<br>拥塞控制的目的：</p>
<ol>
<li>全局性：防止过多的数据注入到网络中</li>
</ol>
<p>需要考虑拥塞的原因并不是接收方导致的，而是整个网络的状况导致的。</p>
<h3 id="拥塞控制算法"><a href="#拥塞控制算法" class="headerlink" title="拥塞控制算法"></a>拥塞控制算法</h3><p>在考虑拥塞控制算法时的给出的假定：</p>
<ol>
<li>数据单向传输。接收方只负责传送确认。</li>
<li>接收方总是有足够大的缓存空间。发送窗口取决于拥塞程度。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">发送方 = min&#123;rwnd,cwnd&#125;</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>接收窗口</th>
<th>接收方根据接受缓存设置的值，并告知给发送方，反映接收方的容量。</th>
</tr>
</thead>
<tbody>
<tr>
<td>拥塞窗口</td>
<td>发送方根据自己估算的网络拥塞程度而设置的窗口之，反应网络的当前容量。</td>
</tr>
</tbody>
</table>
</div>
<p>拥塞控制算法主要用来确定发发送窗口大小。</p>
<h4 id="慢开始和拥塞避免"><a href="#慢开始和拥塞避免" class="headerlink" title="慢开始和拥塞避免"></a>慢开始和拥塞避免</h4><p><img src="https://img-blog.csdnimg.cn/20200921075134609.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2traW5nX2VkYw==,size_16,color_FFFFFF,t_70#pic_center" alt="image"></p>
<p><strong>指数规律增长——加法增大——发生网络拥塞——乘法减小</strong><br>慢开始——拥塞避免——发生拥塞</p>
<p>传输轮次：发送一批报文段，并收到它们的确认的时间。经历了一个往返时延RTT。</p>
<p>开始发送一批拥塞窗口内的报文段到开始发送下一批拥塞窗口内的报文段的时间。</p>
<p>ssthresh:慢开始门限。当拥塞窗口增加到这个程度的时候，拥塞窗口会线性地增长。</p>
<p>发生拥塞之后，下一轮的慢开始的ssthresh值会是发生拥塞时的窗口值的一半。</p>
<h4 id="快重传，快恢复"><a href="#快重传，快恢复" class="headerlink" title="快重传，快恢复"></a>快重传，快恢复</h4><p><img src="https://img-blog.csdn.net/20170823152914228?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzY5NTMxMzU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="image"></p>
<p>发生拥塞的时候，会发生收到三个重复的确认号，那么会执行快重传算法，将拥塞窗口缩减到新的ssthresh值时，重新进入加法增大阶段。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><h4 id="两个协议"><a href="#两个协议" class="headerlink" title="两个协议"></a>两个协议</h4><h4 id="寻址和端口"><a href="#寻址和端口" class="headerlink" title="寻址和端口"></a>寻址和端口</h4><h3 id="UDP——无连接的"><a href="#UDP——无连接的" class="headerlink" title="UDP——无连接的"></a>UDP——无连接的</h3><h3 id="TCP——有连接的"><a href="#TCP——有连接的" class="headerlink" title="TCP——有连接的"></a>TCP——有连接的</h3><h4 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h4><h4 id="首部格式-1"><a href="#首部格式-1" class="headerlink" title="首部格式"></a>首部格式</h4><h4 id="连接管理-1"><a href="#连接管理-1" class="headerlink" title="连接管理"></a>连接管理</h4><h4 id="可靠传出"><a href="#可靠传出" class="headerlink" title="可靠传出"></a>可靠传出</h4><h4 id="流量控制-1"><a href="#流量控制-1" class="headerlink" title="流量控制"></a>流量控制</h4><h4 id="拥塞控制-1"><a href="#拥塞控制-1" class="headerlink" title="拥塞控制"></a>拥塞控制</h4>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/09/%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/09/%E6%A6%82%E8%BF%B0/" class="post-title-link" itemprop="url">计算机网络笔记：概述</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-09 22:40:44" itemprop="dateCreated datePublished" datetime="2021-07-09T22:40:44+08:00">2021-07-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-14 18:14:25" itemprop="dateModified" datetime="2021-07-14T18:14:25+08:00">2021-07-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><h1 id="网络的层次模型"><a href="#网络的层次模型" class="headerlink" title="网络的层次模型"></a>网络的层次模型</h1><h2 id="五层网络模型"><a href="#五层网络模型" class="headerlink" title="五层网络模型"></a>五层网络模型</h2><ul>
<li><strong>应用层</strong></li>
<li><strong>运输层</strong></li>
<li><strong>网络层</strong></li>
<li>链路层</li>
<li>物理层</li>
</ul>
<p><img src="https://static.runoob.com/images/mix/v2-854e3df8ea850c977c30cb1deb1f64db_r.jpg" alt="image"></p>
<h2 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h2><ul>
<li>应用层</li>
<li>表示层</li>
<li>会话层</li>
<li>运输层</li>
<li>网络层</li>
<li>链路层</li>
<li>物理层</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/09/%E5%BA%94%E7%94%A8%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/09/%E5%BA%94%E7%94%A8%E5%B1%82/" class="post-title-link" itemprop="url">计算机网络笔记：应用层</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-09 22:38:59" itemprop="dateCreated datePublished" datetime="2021-07-09T22:38:59+08:00">2021-07-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-19 16:58:00" itemprop="dateModified" datetime="2021-07-19T16:58:00+08:00">2021-07-19</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h1><p>应用层堆应用程序的通信提供服务。</p>
<p>应用层协议的定义包括：</p>
<ol>
<li>应用进程交换的报文类型</li>
<li>报文类型的语法</li>
<li>字段的语义</li>
<li>进程对发送报文的时机、响应报文的需求的规则。</li>
</ol>
<h1 id="应用程序的体系结构"><a href="#应用程序的体系结构" class="headerlink" title="应用程序的体系结构"></a>应用程序的体系结构</h1><h2 id="客户-服务器体系结构"><a href="#客户-服务器体系结构" class="headerlink" title="客户-服务器体系结构"></a>客户-服务器体系结构</h2><p>在这个模型中，总存在一个打开的主机，称为<strong>服务器</strong>,用于服务来自其他称为<strong>客户机</strong>的请求。<br>客户机之间不会相互通信。</p>
<h2 id="P2P结构"><a href="#P2P结构" class="headerlink" title="P2P结构"></a>P2P结构</h2><p>也称为对等结构。任意间断链接的主机对（<strong>对等方</strong>），直接相互通信。<br>流量密集型。扩展性。需要注意安全。</p>
<h1 id="进程间的通信"><a href="#进程间的通信" class="headerlink" title="进程间的通信"></a>进程间的通信</h1><h2 id="客户和服务器进程"><a href="#客户和服务器进程" class="headerlink" title="客户和服务器进程"></a>客户和服务器进程</h2><h2 id="进程和计算机网络之间的接口"><a href="#进程和计算机网络之间的接口" class="headerlink" title="进程和计算机网络之间的接口"></a>进程和计算机网络之间的接口</h2><h2 id="进程的寻址"><a href="#进程的寻址" class="headerlink" title="进程的寻址"></a>进程的寻址</h2><h1 id="运输服务"><a href="#运输服务" class="headerlink" title="运输服务"></a>运输服务</h1><h2 id="服务范畴"><a href="#服务范畴" class="headerlink" title="服务范畴"></a>服务范畴</h2><ol>
<li>可靠数据传输</li>
<li>吞吐量</li>
<li>定时</li>
<li>保证安全性</li>
</ol>
<h2 id="TCP服务"><a href="#TCP服务" class="headerlink" title="TCP服务"></a>TCP服务</h2><p>提供服务：</p>
<ol>
<li>面向连接的服务。使用TCP协议的时候，在应用层数据报文开始流动之前，其客户机程序和服务器程序之间互相交换运输层的控制信息。</li>
<li>可靠的数据传输服务</li>
</ol>
<h2 id="UDP服务"><a href="#UDP服务" class="headerlink" title="UDP服务"></a>UDP服务</h2><h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><p>超文本传输协议(HyperText Transfer Protocol,HTTP)，是Web的核心。它有两部分程序实现，一个是客户机程序，另一个是服务器程序，这两个程序通过交换HTTP报文进行会话。<br>HTTP使用TCP作为运输层协议。HTTP客户机发起一个和服务器的TCP链接，一旦链接建立，浏览器和服务器进程就可以通过套接字接口访问TCP。<br>HTTP是<strong>无状态协议</strong>，服务端不会存储客户端的任何状态。</p>
<ol>
<li>浏览器分析URL</li>
<li>浏览器向DNS请求解析IP地址</li>
<li>DNS解析IP地址</li>
<li>浏览器于服务器建立TCP连接</li>
<li>浏览器向服务器发出GET方法</li>
<li>服务器响应</li>
<li>TCP连接释放</li>
<li>浏览器显示</li>
</ol>
<h2 id="非持续连接和持续连接"><a href="#非持续连接和持续连接" class="headerlink" title="非持续连接和持续连接"></a>非持续连接和持续连接</h2><p>客户端进程和服务器进程之间可以采用两种方式进行链接。称为持久链接和非持久链接。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>连接方式</th>
<th>特征</th>
</tr>
</thead>
<tbody>
<tr>
<td>持久链接</td>
<td>每一个请求一个接一个地被发出，每个请求都对应一个但对的TCP链接。</td>
</tr>
<tr>
<td>非持久链接</td>
<td>所有的请求都会经过相同的TCP链接发出。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="非持久链接"><a href="#非持久链接" class="headerlink" title="非持久链接"></a>非持久链接</h3><h3 id="持久链接"><a href="#持久链接" class="headerlink" title="持久链接"></a>持久链接</h3><ol>
<li>客户机进程在80端口发起一个到服务器的TCP链接。客户机和服务器上分别有一个套接字与之相关联。</li>
<li>客户机经过它的套接字相服务器发送一个HTTP请求报文。</li>
<li>服务器进程经过它的套接字接受请求报文。从存储器中寻找请求的对象，在响应报文中封装对象，并通过套接字相客户机发送响应报文。</li>
<li>HTTP服务器进程通知TCP断开连接。</li>
<li>HTTP客户机接受响应报文，TCP连接管壁。客户机从响应报文中提取文件。</li>
</ol>
<p>RTT：一个小的分组从客户机到服务器再回到客户机所花费的时间。</p>
<h2 id="报文格式"><a href="#报文格式" class="headerlink" title="报文格式"></a>报文格式</h2><h3 id="HTTP请求报文"><a href="#HTTP请求报文" class="headerlink" title="HTTP请求报文"></a>HTTP请求报文</h3><p>以下是一个典型的请求报文：</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET /somedir/page.hetml HTTP/1.1        //请求行：包括方法字段、URL字段和HTTP协议版本字段</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>www.where.com                     //首部行</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close                       //采用非之久连接</span><br><span class="line"><span class="attribute">User-agent</span><span class="punctuation">: </span>Mozilla/4.0                 //定义用户代理</span><br><span class="line"><span class="attribute">Accept-language</span><span class="punctuation">: </span>fr                     //网页语言版本</span><br></pre></td></tr></table></figure>
<p>通用格式如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;方法&gt; sp <span class="tag">&lt;<span class="name">URL</span>&gt;</span> sp &lt;版本&gt;   //请求行</span><br><span class="line">&lt;首部字段名&gt;sp&lt;值&gt;cr lf      //首部行</span><br><span class="line">...</span><br><span class="line">&lt;首部字段名&gt;sp&lt;值&gt;cr lf</span><br><span class="line">cr lf                       //空行</span><br><span class="line">//以下都是实体主体</span><br></pre></td></tr></table></figure></p>
<p>使用GET方法时，实体主体是空的。只有采用POST方法，即用户向客户端传输信息时，实体主体中会包含用户希望传输的信息。</p>
<h3 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK             //初始状态行，包括协议版本，状态码状态信息</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close           //首部行</span><br><span class="line"><span class="attribute">Date</span>:</span><br><span class="line"><span class="attribute">Server</span>:</span><br><span class="line"><span class="attribute">Last-Modified</span>:</span><br><span class="line"><span class="attribute">Content-Length</span>:</span><br><span class="line"><span class="attribute">Content-Type</span>:</span><br><span class="line"></span><br><span class="line"><span class="armasm">&lt;<span class="meta">data</span>&gt;                      <span class="comment">//实体主体</span></span></span><br></pre></td></tr></table></figure>
<p>常见的状态码：用于标记当前服务器的状态，指示了请求的结果。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>状态码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>请求成功</td>
</tr>
<tr>
<td>301</td>
<td>请求对象被永久转移</td>
</tr>
<tr>
<td>400</td>
<td>请求不能被服务器理解</td>
</tr>
<tr>
<td>404</td>
<td>请求文档不存在</td>
</tr>
<tr>
<td>505</td>
<td>服务器不支持请求报文使用的HTTP的协议版本。</td>
</tr>
</tbody>
</table>
</div>
<p>状态码|含义<br>1<strong>|接受的请求正在处理<br>2</strong>|请求正常处理完毕<br>3<strong>|需要进行附加操作以完成请求<br>4</strong>|服务器无法处理请求<br>5**|服务器请求处理出错</p>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><p>cooke是服务器用来跟踪用户的技术。它包含了四个部分：</p>
<ol>
<li>http响应报文中有一个cookie首部行 Set-cookie: &lt;&gt;</li>
<li>http请求报文中有一个cookie首部行 Cookie: &lt;&gt;</li>
<li>用户端系统中有一个cookie文件，由用户的浏览器处理。</li>
<li>web站点后由一个后端数据库。</li>
</ol>
<p>没有Cookie信息下的状态请求：<br><img src="https://pic.leetcode-cn.com/1609256929-PgwBxP-image.png" alt="image"><br>有Cookie信息状态下的请求：<br><img src="https://www.ituring.com.cn/figures/2014/PIC%20HTTP/06.d02z.024.png" alt="image"></p>
<p>采用了Cookie技术下的请求报文和响应报文：</p>
<ol>
<li>没有Cookie时，请求报文</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/reader/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>hackr.jp</span><br><span class="line">*首部字段内没有Cookie的相关信息</span><br></pre></td></tr></table></figure>
<ol>
<li>服务端生成Cookie</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Date</span><span class="punctuation">: </span>Thu, 12 Jul 2012 07:12:20 GMT</span><br><span class="line"><span class="attribute">Server</span><span class="punctuation">: </span>Apache</span><br><span class="line">＜Set-Cookie: sid=1342077140226724; path=/; expires=Wed,</span><br><span class="line">10-Oct-12 07:12:20 GMT＞</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>text/plain; charset=UTF-8</span><br></pre></td></tr></table></figure>
<ol>
<li>自动发送保存的Cookie</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/image/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>hackr.jp</span><br><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>sid=1342077140226724</span><br></pre></td></tr></table></figure>
<h2 id="web缓存——或者代理服务器"><a href="#web缓存——或者代理服务器" class="headerlink" title="web缓存——或者代理服务器"></a>web缓存——或者代理服务器</h2><h2 id="条件Get方法"><a href="#条件Get方法" class="headerlink" title="条件Get方法"></a>条件Get方法</h2><h1 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h1><h2 id="FTP特征"><a href="#FTP特征" class="headerlink" title="FTP特征"></a>FTP特征</h2><p>FTP是基于客户/服务器端协议。用户需要通过一个客户机程序连接倒服务器上。</p>
<h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><ol>
<li>登录</li>
<li>传输——使用TCP</li>
</ol>
<p>客户端与服务器端之间会建立两个连接，包括控制连接21，数据连接20.其中控制连接21负责传请求，数据连接20负责传数据。</p>
<h1 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h1><h2 id="DNS提供的服务"><a href="#DNS提供的服务" class="headerlink" title="DNS提供的服务"></a>DNS提供的服务</h2><p>主要工作：主机名到IP名的转换。<br>其他服务：</p>
<ol>
<li>主机别名</li>
<li>邮件服务器别名</li>
<li>负载分配</li>
</ol>
<h2 id="DNS工作机理"><a href="#DNS工作机理" class="headerlink" title="DNS工作机理"></a>DNS工作机理</h2><h3 id="分布式、层次式的数据库"><a href="#分布式、层次式的数据库" class="headerlink" title="分布式、层次式的数据库"></a>分布式、层次式的数据库</h3><p>DNS具有一个分布式、层次化的数据库。它包括了：</p>
<ol>
<li>DNS根服务器</li>
<li>顶级域服务器</li>
<li>权威DNS服务器</li>
</ol>
<h3 id="DNS缓存"><a href="#DNS缓存" class="headerlink" title="DNS缓存"></a>DNS缓存</h3><p>为了改善时延性能，并减少DNS报文数量，DNS采用了缓存技术。在请求域名的时候,会首先从缓存中找到这个域名。</p>
<ol>
<li>递归查询<br>顶级——根——权威——自己</li>
<li>迭代查询<br>先从本地服务器查起，逐级查询</li>
</ol>
<h3 id="DNS记录和报文"><a href="#DNS记录和报文" class="headerlink" title="DNS记录和报文"></a>DNS记录和报文</h3>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/09/%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E5%A4%A7%E5%88%A9%E6%B6%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Albert -W">
      <meta itemprop="description" content="更不更新看心情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不先进摸鱼研究所">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/07/09/%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E5%A4%A7%E5%88%A9%E6%B6%A6/" class="post-title-link" itemprop="url">股票的最大利润</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-09 08:29:41" itemprop="dateCreated datePublished" datetime="2021-07-09T08:29:41+08:00">2021-07-09</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Albert -W</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
